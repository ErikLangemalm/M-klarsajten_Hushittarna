<!DOCTYPE html>
<html lang="sv">

</html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mäklarwebbplats</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <header>
    <h1>Mäklarwebbplats</h1>
    <nav>
      <ul>
        <a href="">Hem</a>
        <a href="#listings">Fastighetsannonser</a>
        <a href="#contact">Kontakt</a>
        <a href="#search">Sök</a>
        <a href="#logIn">Logga in</a>
      </ul>
    </nav>
  </header>

  <main id="content">

  </main>

  <footer>
  </footer>

  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script type="module" src="app.js"></script>
  <!--
  <script>

    const pages = {
      home: "<h2>Välkommen till vår mäklarwebbplats!</h2><p>Vi hjälper dig hitta ditt drömhem.</p>",
      listings: generateListingsPage(),
      contact: "<h2>Kontakta oss</h2><p>Fyll i formuläret nedan för att kontakta oss:</p><form id='contactForm'><label for='name'>Namn: </label><input type='text' id='name' name='name' required><br><br><label for='email'>E-post:</label><input type='email' id='email' name='email' required><br><br><label for='message'>Meddelande:</label><br><textarea id='textarea' name= 'textarea' rows='4' cols= '50'></textarea><br><input type='submit' value='Skicka'></form>",
      search: "<h2>Sök</h2><p>Använd sökfältet nedan för att söka:</p><input type='text' id='searchInput' placeholder='Skriv in din sökning'><button onclick='searchHouses()'>Sök</button><p id='searchResult'></p>"
    };


    $(document).ready(function () {
      loadPage('home');
    });

    //klickhanterare för länkarna
    $(document).on('click', 'nav a', function (e) {
      e.preventDefault(); //förhindra standard beteende för länkar
      const pageId = $(this).data('page');
      loadPage(pageId);
    });


    function loadPage(page) {
      $('#content').html(pages[page]);
    }

    //sidan med fastighetsannonser och ikoner
    function generateListingsPage() {
      let listingsPage = "<h2>Fastighetsannonser</h2>";

      for (let i = 1; i <= 20; i++) {
        listingsPage += `<p><i class="fas fa-home listing-icon"></i>Hus ${i}</p>`;
      }

      return listingsPage;
    }

    // Sökfunktion
    function search() {
      const searchInput = $('#searchInput').val().toLowerCase();
      const searchResult = searchInput ? `Resultat för sökning: "${searchInput}"` : 'Ingen sökning angiven';
      $('#searchResult').text(searchResult);
    }


    async function fetchData() {
      try {
        const response = await fetch('http://localhost:3000/data'); // Adjust the URL based on your JSON server configuration
        const jsonData = await response.json();
        return jsonData;
      } catch (error) {
        console.error('Error fetching data:', error);
        return null;
      }
    }
    //Den funktion funkar bara med antalRum
    async function searchHouses() {
      // Get user input values
      const jsonData = await fetchData();
      console.log(Object.keys(jsonData))
      console.log(Object.values(jsonData))
      console.log(Object.entries(jsonData))

      if (!jsonData) {
        console.error('No data available.');
        return;
      }
      
      const searchInput = $('#searchInput').val().toLowerCase();
      console.log(searchInput)
      
      const house = jsonData.find(house => house.antalRum === parseInt(searchInput));
      console.log(house)
      //console.log(house["bostadsTyp"]);
      displayResults(house)
    }

    function displayResults(house) {
      var resultsContainer = document.getElementById('searchResult');
      resultsContainer.innerHTML = '';

      if (!house) {
        resultsContainer.innerHTML = '<p>No matching houses found.</p>';
        return;
      }

      if (Array.isArray(house)) {
        house.forEach(function (result) {
          var houseDetails = document.createElement('p');
          houseDetails.textContent = `House ID: ${result.id}, Type: ${result.bostadsTyp}, Address: ${result.addres}, Price: ${result.utgångsPris}, Rooms: ${ result.antalRum }`;
          resultsContainer.appendChild(houseDetails);
        });
      } else {
        var houseDetails = document.createElement('p');
        houseDetails.textContent = `House ID: ${house.id}, Type: ${house.bostadsTyp}, Address: ${house.addres}, Price: ${house.utgångsPris}, Rooms: ${house.antalRum }`;
        resultsContainer.appendChild(houseDetails);
      }
    }
  </script> -->
</body>

</html>